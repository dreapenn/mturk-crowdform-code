<head>
<script src="https://assets.crowd.aws/crowd-html-elements.js"></script><!-- jquery -->
<meta charset="utf-8" />
<meta content="width=device-width, initial-scale=1" name="viewport" />

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="nofollow" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm” crossorigin=”anonymous">
<!-- You must include this JavaScript file -->
<script src="https://assets.crowd.aws/crowd-html-elements.js"></script>

<style>
.grid {
   max-height: 150px;
 max-width: 200px;
 width:200px;
 height:150px;
}
.container {
  position: relative;
  border: 3px solid black;
}

img.stretchy {
/*width:100px;*/
height: 150px;
}
.container1 {
width: 50%; /*Use this to control width of the parent container, hence the image*/

}
.close {
  font-size: 45px;
  font-weight: 600;
}

.msg {
    color: blue;
    font-size: 45px;
  font-weight: 600;
  text-align: center;
    
    
}


</style>
</head>

<!--------------------------------------------------------------------------------------------->
<body>
<!-- Example Section------------->
<!--Full view -->
<div id="exampleFull" style='display:none' class="container">
<table >
<tr><h2>Task Instructions</h2></tr>
<tr>
   <td>
   <positive-example> <p>Correct example</p>
            <p>Select the <b>lamps</b> that match the one shown in the source image.</p>
		    <p><img width="360px" height="140px" src="https://odin.cis.temple.edu/hotels8k/extra/mturk correct2.png"/></p>
		    <p><img width="30px" height="30px" align="center" src="https://odin.cis.temple.edu/hotels8k/extra/correct mturk.png"/> The lamps appear to match even though the room is different. </p>
		  </positive-example></td>
<td><negative-example><p>Wrong example</p>
		      <p>Select the <b>lamps</b> that match the one shown in the source image.</p>
		    <p><img width="360px" height="140px" src="https://odin.cis.temple.edu/hotels8k/extra/mturk wrong2.png"/></p>
		    <p><img width="30px" height="30px" align="center" src="https://odin.cis.temple.edu/hotels8k/extra/wrong mturk.png"/> The lamps do not match because the shape of the lamp shade is different.</p>
		  </negative-example>
   </td>
</tr>
<tr><td>
<button id="show_inst_full" onClick="closeInstructions()"  style="text-align:center;">Start task</button>
</td></tr>
</table>
</div>

<!--Cropped view -->
<div id="exampleCropped" style='display:none' class="container">
<table >
<tr><h2>Task Instructions</h2></tr>
<tr>
<td>
   <positive-example> <p>Correct Example:</p>
   <p>Select the <b>Dresser</b> that match the one shown in the source image.</p>
   <p><img width="360px" height="140px" src="https://odin.cis.temple.edu/hotels8k/extra/mturk cropped example good.png"/></p>
   <p><img width="30px" height="30px" align="center" src="https://odin.cis.temple.edu/hotels8k/extra/correct mturk.png"/> The dressers appear to match even though the viewpoint is different. </p>
</positive-example></td>
<td><negative-example><p>Wrong Example:</p>
   <p>Select the <b>Art</b> that match the one shown in the source image.</p>
   <p><img width="360px" height="140px" src="https://odin.cis.temple.edu/hotels8k/extra/mturk cropped bad.png"/></p>
   <p><img width="30px" height="30px" align="center" src="https://odin.cis.temple.edu/hotels8k/extra/wrong mturk.png"/> The arts do not match because the drawing is different.</p>
</negative-example></td>
</tr>
<tr><td>
<button  id="show_inst_cropped" onClick="closeInstructions()"  style="text-align:center;">Start task</button>
</td></tr>
</table>
</div>
<!--highlighted view -->

<div id="exampleHighlight" style='display:none' class="container">
<table >
<tr><h2>Task Instructions</h2></tr>
<tr>
   <td>
   <positive-example> <p>Correct example</p>
            <p>Select the <b>Art</b> that match the one shown in the source image.</p>
		    <p><img width="360px" height="140px" src="https://odin.cis.temple.edu/hotels8k/extra/example highlight mturk .png"/></p>
		    <p><img width="30px" height="30px" align="center" src="https://odin.cis.temple.edu/hotels8k/extra/correct mturk.png"/> The Arts appear to match even though the pointview is different </p>
		  </positive-example></td>
<td><negative-example><p>Wrong example</p>
		      <p>Select the <b>Art</b> that match the one shown in the source image.</p>
		    <p><img width="360px" height="140px" src="https://odin.cis.temple.edu/hotels8k/extra/highlight wrong example.png"/></p>
		    <p><img width="30px" height="30px" align="center" src="https://odin.cis.temple.edu/hotels8k/extra/wrong mturk.png"/> The Arts do not match because the drawing is different.</p>
		  </negative-example>
   </td>
</tr>
<tr><td>
<button  id="show_inst_highlight" onClick="closeInstructions()" style="text-align:center;">Start task</button>
</td></tr>
</table>
</div>

<!-------------------------------------------------------------------------------------------------------->
<crowd-form>
<div id="message" class="msg" style='display:none'>You have already completed the maximum number of HITs allowed by this requester. Please click 'Return HIT' to avoid any impact on your approval rating.</div> 


<!--Hard-Coded Attention Checks-------------------->
<!-- Full view -->
<div id="attentionFormFull" style='display:none'>
    <div class="container-fluid">
        <h2>Object Matching Task</h2>
        <p>For the outlined <b>Art</b> in the source image on the left, select the target images on the right that contain the same <b>Art</b>.</p>
        <p><mark>Remember: Objects of the same brand/style should be considered to match even if the room, lighting, or viewpoint are different</mark></p>
        <div class="row">
          <!-- Source Image -->
            <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4">
                <div class="well well-md">
                    <h3>Source Image</h3>
                    <img class="grid" src="https://odin.cis.temple.edu/hotels8k/attention_checks/full/src_url.jpg" alt="Could not load source image"/>
                </div>
            </div>
            
            <!-- Target Images 2x3 grid -->
            <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <div class="well well-md">
                    <h3>Target Images</h3>
                    <div class="row">
                        <!-- (0,0) (1, 0)-->
                       
                            <table style="border-spacing: 10px; border-collapse: separate;">
                            <tr>
                            <td>
                            <crowd-checkbox id="full_attention1" name="full_attention1" value="full_attention1"></crowd-checkbox>
                            <img class="grid" src="https://odin.cis.temple.edu/hotels8k/attention_checks/full/target1.jpg" alt="Could not load target image 0,0"/>
                            </td>
                            <td>
                            <crowd-checkbox id="full_attention2" name="full_attention2" value="full_attention2"></crowd-checkbox>
                            <img class="grid" src="https://odin.cis.temple.edu/hotels8k/attention_checks/full/target2.jpg" alt="Could not load target image 1,0"/>
                            </td>
                            </tr>
                        
                        <!-- (0,1)  (1, 1)-->
                            <tr>
                            <td>
                            <crowd-checkbox id="full_attention3" name="full_attention3" value="full_attention3"></crowd-checkbox>
                            <img class="grid" src="https://odin.cis.temple.edu/hotels8k/attention_checks/full/target3.jpg" alt="Could not load target image 0,1"/>
                            </td>
                            <td>
                            <crowd-checkbox id="full_attention4" name="full_attention4" value="full_attention4" ></crowd-checkbox>
                            <img class="grid" src="https://odin.cis.temple.edu/hotels8k/attention_checks/full/target4.jpg" alt="Could not load target image 1,1"/>
                            </td>
                            </tr>
                            </table>
                            
                    </div>
                   
                </div>
                 <button type="button"  id="show_main_full" onClick="showMain()"  style="text-align:center;">Next</button>
            </div>
        
        </div>
    </div>
    
</div><!-- end attention check form ------------------------------------------->

<!-- Cropped view -->
<div id="attentionFormCropped" style='display:none'>
    <div class="container-fluid">
        <h2>Object Matching Task</h2>
        <p>For the <b>Art</b> in the source image on the left, select the target images on the right that contain the same <b>Art</b>.</p>
        <p><mark>Remember: Objects of the same brand/style should be considered to match even if the room, lighting, or viewpoint are different</mark></p>
        <div class="row">
          <!-- Source Image -->
            <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4">
                <div class="well well-md">
                    <h3>Source Image</h3>
                    <img class="stretchy"  src="https://odin.cis.temple.edu/hotels8k/attention_checks/cropped/src_url.jpg" alt="Could not load source image"/>
                </div>
            </div>
            
            <!-- Target Images 2x3 grid -->
               <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <div class="well well-md">
                    <h3>Target Images</h3>
                    <div class="row">
                        <!-- (0,0) (1, 0)-->
                       
                        <table style="border-spacing: 10px; border-collapse: separate;">
                            <tr>
                            <td>
                            <crowd-checkbox id="cropped_attention1" name="cropped_attention1" value="cropped_attention1"></crowd-checkbox>
                            <div class="container1"><img class="stretchy" src="https://odin.cis.temple.edu/hotels8k/attention_checks/cropped/target1.jpg" alt="Could not load target image 0,0"/></div>
                            </td>
                            <td>
                            <crowd-checkbox id="cropped_attention2" name="cropped_attention2" value="cropped_attention2"></crowd-checkbox>
                            <div class="container1"><img class="stretchy" src="https://odin.cis.temple.edu/hotels8k/attention_checks/cropped/target2.jpg" alt="Could not load target image 0,1"/></div>
                            </td>
                            </tr>
                        
                        <!-- (0,1)  (1, 1)-->
                            <tr>
                            <td>
                            <crowd-checkbox id="cropped_attention3" name="cropped_attention3" value="cropped_attention3"></crowd-checkbox>
                            <div class="container1"><img class="stretchy" src="https://odin.cis.temple.edu/hotels8k/attention_checks/cropped/target3.jpg" alt="Could not load target image 1,0"/></div>
                            </td>
                            <td>
                            <crowd-checkbox id="cropped_attention4" name="cropped_attention4" value="cropped_attention4"></crowd-checkbox>
                            <div class="container1"><img class="stretchy" src="https://odin.cis.temple.edu/hotels8k/attention_checks/cropped/target4.jpg" alt="Could not load target image 1,1"/></div>
                            </td>
                            </tr>
                        </table>
                    </div>
                   
                </div>
                 <button type="button"  id="show_main_cropped" onClick="showMain()"  style="text-align:center;">Next</button>
            </div>
        
        </div>
    </div>
    
</div><!-- end attention check form -->


<!-- Highlight view -->
<div id="attentionFormHighlight" style='display:none'>
    <div class="container-fluid">
        <h2>Object Matching Task</h2>
        <p>For the outlined <b>Art</b> in the source image on the left, select the target images on the right that contain the same <b>Art</b>.</p>
        <p><mark>Remember: Objects of the same brand/style should be considered to match even if the room, lighting, or viewpoint are different</mark></p>
        <div class="row">
          <!-- Source Image -->
            <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4">
                <div class="well well-md">
                    <h3>Source Image</h3>
                    <img class="grid" src="https://odin.cis.temple.edu/hotels8k/attention_checks/highlight/src_url.jpg" alt="Could not load source image"/>
                </div>
            </div>
            
            <!-- Target Images 2x3 grid -->
            <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <div class="well well-md">
                    <h3>Target Images</h3>
                    <div class="row">
                        <!-- (0,0) (1, 0)-->
                        <table style="border-spacing: 10px; border-collapse: separate;">
                            <tr>
                            <td>
                            <crowd-checkbox id="highlight_attention1" name="highlight_attention1" value="highlight_attention1"></crowd-checkbox>
                            <img class="grid" src="https://odin.cis.temple.edu/hotels8k/attention_checks/highlight/target1.jpg" alt="Could not load target image 0,0"/>
                            </td>
                            <td>
                            <crowd-checkbox id="highlight_attention2" name="highlight_attention2" value="highlight_attention2"></crowd-checkbox>
                            <img class="grid" src="https://odin.cis.temple.edu/hotels8k/attention_checks/highlight/target2.jpg" alt="Could not load target image 1,0"/>
                            </td>
                            </tr>
                        
                        <!-- (0,1)  (1, 1)-->
                             <tr>
                             <td>
                            <crowd-checkbox id="highlight_attention3" name="highlight_attention3" value="highlight_attention3"></crowd-checkbox>
                            <img class="grid" src="https://odin.cis.temple.edu/hotels8k/attention_checks/highlight/target3.jpg" alt="Could not load target image 0,1"/>
                            </td>
                            <td>
                            <crowd-checkbox id="highlight_attention4" name="highlight_attention4" value="highlight_attention4" ></crowd-checkbox>
                            <img class="grid" src="https://odin.cis.temple.edu/hotels8k/attention_checks/highlight/target4.jpg" alt="Could not load target image 1,1"/>
                            </td>
                            </tr>
                       </table>
                        
                    </div>
                   
                </div>
                 <button type="button"  id="show_main_highlight" onClick="showMain()"  style="text-align:center;">Next</button>
            </div>
        
        </div>
    </div>
    
</div><!-- end attention check form ------------------------------------------->

<!-- padded_50 and 100 view -->
<div id="attentionFormPadded" style='display:none'>
    <div class="container-fluid">
        <h2>Object Matching Task</h2>
        <p>For the <b>Art</b> in the source image on the left, select the target images on the right that contain the same <b>Art</b>.</p>
        <p><mark>Remember: Objects of the same brand/style should be considered to match even if the room, lighting, or viewpoint are different</mark></p>
        <div class="row">
          <!-- Source Image -->
            <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4">
                <div class="well well-md">
                    <h3>Source Image</h3>
                    <img class="stretchy"  src="https://odin.cis.temple.edu/hotels8k/attention_checks/padded_50/src_url.jpg" alt="Could not load source image"/>
                </div>
            </div>
            
            <!-- Target Images 2x3 grid -->
               <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <div class="well well-md">
                    <h3>Target Images</h3>
                    <div class="row">
                        <!-- (0,0) (1, 0)-->
                        <table style="border-spacing: 10px; border-collapse: separate;">
                            <tr>
                                <td>
                            <crowd-checkbox id="padded_attention1" name="padded_attention1" value="padded_attention1"></crowd-checkbox>
                            <div class="container1"><img class="stretchy" src="https://odin.cis.temple.edu/hotels8k/attention_checks/padded_50/target1.jpg" alt="Could not load target image 0,0"/></div>
                            </td>
                            <td>
                            <crowd-checkbox id="padded_attention2" name="padded_attention2" value="padded_attention2"></crowd-checkbox>
                            <div class="container1"><img class="stretchy" src="https://odin.cis.temple.edu/hotels8k/attention_checks/padded_50/target2.jpg" alt="Could not load target image 0,1"/></div>
                            </td>
                            </tr>
                        <!-- (0,1)  (1, 1)-->
                            <tr>
                                <td>
                            <crowd-checkbox id="padded_attention3" name="padded_attention3" value="padded_attention3"></crowd-checkbox>
                            <div class="container1"><img class="stretchy" src="https://odin.cis.temple.edu/hotels8k/attention_checks/padded_50/target3.jpg" alt="Could not load target image 1,0"/></div>
                               </td>
                               <td>
                            <crowd-checkbox id="padded_attention4" name="padded_attention4" value="padded_attention4"></crowd-checkbox>
                            <div class="container1"><img class="stretchy" src="https://odin.cis.temple.edu/hotels8k/attention_checks/padded_50/target4.jpg" alt="Could not load target image 1,1"/></div>
                              </td>
                            </tr>
                      </table>
                        
                    </div>
                   
                </div>
                 <button type="button"  id="show_main_padded" onClick="showMain()"  style="text-align:center;">Next</button>
            </div>
        
        </div>
    </div>
    
</div><!-- end attention check form -->



<!-- Main tasks------------------>
<!--------------------------------------------------------------------------------------------->
<!-- full + highlighted -->

<div id="mainFormFull"  style='display:none'>   
    
    <crowd-instructions link-text="View instructions" link-type="button">
    <short-summary>
      <p>Select the matching objects from the target images on the right that match the object in the source image.</p>
    </short-summary>
    <detailed-instructions>
      <h3>Further instructions</h3>
      <p> Objects should be considered a match when they have the same color, style, or pattern; HOWEVER, they are still a match if the even if the room, lighting, or viewpoint are different. </p>
      <p>If you can’t see all of the object make your best guess based on what is visible.</p>
      <p>If none of the objects on the right match the one on the left, press ‘Submit’ without checking any boxes.</p>
    </detailed-instructions>
    <positive-example> 
            <p>Select the <b>lamps</b> that match the one shown in the source image.</p>
		    <p><img width="360px" height="140px" src="https://odin.cis.temple.edu/hotels8k/extra/mturk correct2.png"/></p>
		    <p><img width="30px" height="30px" align="center" src="https://odin.cis.temple.edu/hotels8k/extra/correct mturk.png"/> The lamps appear to match even though the room is different. </p>
		  </positive-example>
		  <negative-example>
		      <p>Select the <b>lamps</b> that match the one shown in the source image.</p>
		    <p><img width="360px" height="140px" src="https://odin.cis.temple.edu/hotels8k/extra/mturk wrong2.png"/></p>
		    <p><img width="30px" height="30px" align="center" src="https://odin.cis.temple.edu/hotels8k/extra/wrong mturk.png"/> The lamps do not match because the shape of the lamp shade is different.</p>
		  </negative-example>
</crowd-instructions>

    <div class="container-fluid">
        <h2>Object Matching Task</h2>
        <p>For the outlined <b>${obj_class}</b> in the source image on the left, select the target images on the right that contain the same <b>${obj_class}</b>.</p>
        <p><mark>Remember: Objects of the same brand/style should be considered to match even if the room, lighting, or viewpoint are different</mark></p>
        <div class="row">
          <!-- Source Image -->
            <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4">
                <div class="well well-md">
                    <h3>Source Image</h3>
                    <img class="grid" src="${src_url}" alt="Could not load source image"/>
                </div>
            </div>
            
            <!-- Target Images 2x3 grid -->
            <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6">
                <div class="well well-md">
                    <h3>Target Images</h3>
                    <div class="row">
                        <!-- (0,0) (1, 0)-->
                    <table style="border-spacing: 10px; border-collapse: separate;">
                            <tr>
                            <td>
                            <crowd-checkbox id="boxone_full"  name="full_image_1" value=""></crowd-checkbox>
                            <img class="grid" id="target1_full" src="" alt="Could not load target image 0,0"/>
                            </td>
                            <td>
                            <crowd-checkbox id="boxtwo_full" name="full_image_2" value=""></crowd-checkbox>
                            <img class="grid" id="target2_full" src="" alt="Could not load target image 1,0"/>
                            </td>
                            </tr>
                        
                        <!-- (0,1)  (1, 1)-->
                         <tr>
                         <td>
                         <crowd-checkbox id="boxthree_full" name="full_image_3" value=""></crowd-checkbox>
                         <img class="grid" id="target3_full"src="" alt="Could not load target image 0,1"/>
                         </td>
                         <td>
                         <crowd-checkbox id="boxfour_full"  name="full_image_4" value=""></crowd-checkbox>
                         <img class="grid" id="target4_full" src="" alt="Could not load target image 1,1"/>
                         </td>
                         </tr>
                   </table>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
<input id="shuffled_array" name="shuffled_array" hidden></input>   
<input id="log" name="log" hidden></input>
<input type="hidden" id="inputAssignmentId" name="assignmentId" value="">
<input type="hidden" id="workerId" name="workerId" value="" >
<input type="hidden" id="condition" name="condition" value="${condition}" >
 <div style="text-align:center;"><crowd-button form-action="submit">Submit My Work</crowd-button></div>
</div> <!-- end main form --> 


<!-- Cropped + padded-->
<div id="mainFormCropped"  style='display:none'>   
    
    <crowd-instructions link-text="View instructions" link-type="button" id="instructions">
    <short-summary>
      <p>Select the matching objects from the target images on the right that match the object in the source image.</p>
    </short-summary>
    <detailed-instructions>
      <h3>Further instructions</h3>
      <p> Objects should be considered a match when they have the same color, style, or pattern; HOWEVER, they are still a match if the even if the room, lighting, or viewpoint are different. </p>
      <p>If you can’t see all of the object make your best guess based on what is visible.</p>
      <p>If none of the objects on the right match the one on the left, press ‘Submit’ without checking any boxes.</p>
    </detailed-instructions>
    <positive-example> 
            <p>Select the <b>Dresser</b> that match the one shown in the source image.</p>
		    <p><img width="360px" height="140px" src="https://odin.cis.temple.edu/hotels8k/extra/mturk cropped example good.png"/></p>
		    <p><img width="30px" height="30px" align="center" src="https://odin.cis.temple.edu/hotels8k/extra/correct mturk.png"/> The dressers appear to match even though the viewpoint is different. </p>
		  </positive-example>
		  <negative-example>
		      <p>Select the <b>Art</b> that match the one shown in the source image.</p>
		    <p><img width="360px" height="140px" src="https://odin.cis.temple.edu/hotels8k/extra/mturk cropped bad.png"/></p>
		    <p><img width="30px" height="30px" align="center" src="https://odin.cis.temple.edu/hotels8k/extra/wrong mturk.png"/> The arts do not match because the drawing is different.</p>
		  </negative-example>
</crowd-instructions>
  
<div class="container-fluid">
      <h2>Object Matching Task</h2>
      <p>For the <b>${obj_class}</b> in the source image on the right, select the target images on the right that contain the same <b>${obj_class}</b>.</p>
      <p><mark>Remember: Objects of the same brand/style should be considered to match even if the room, lighting, or viewpoint are different</mark></p>

     <div class="row"><!-- Source Image -->
     <div class="col-sm-4 col-md-4 col-lg-4 col-xl-4">
    <div class="well well-md">
    <h3>Source Image</h3>
    <img alt="Could not load source image" src="${src_url}" class="stretchy" /></div>
     </div>
          <!-- Target Images 2x3 grid -->

        <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6">
        <div class="well well-md">
        <h3>Target Images</h3>

         <div class="row">
        <!-- (0,0) (1, 0)-->
         
        <table style="border-spacing: 10px; border-collapse: separate;">
        <tr>
        <td>
        <crowd-checkbox id="boxone_crop" name="crop_image_1" value=""></crowd-checkbox>
        <div class="container1"><img class="stretchy" id="target1_crop" src="" alt="Could not load target image 0,0"/></div>
         </td>
         <td>
         <crowd-checkbox id="boxtwo_crop" name="crop_image_2" value=""></crowd-checkbox>
         <div class="container1"><img class="stretchy" id="target2_crop" src="" alt="Could not load target image 1,0"/></div>
         </td>
       </tr>
                <!-- (0,1)  (1, 1)-->
        <tr>
        <td>
        <crowd-checkbox id="boxthree_crop" name="crop_image_3" value=""></crowd-checkbox>
        <div class="container1"><img class="stretchy" id="target3_crop" src="" alt="Could not load target image 0,1"/></div>
       </td>
       <td>
       <crowd-checkbox id="boxfour_crop" name="crop_image_4" value=""></crowd-checkbox>
       <div class="container1"><img class="stretchy" id="target4_crop" src="" alt="Could not load target image 1,1"/></div>
       </td>
       </tr>
  </table>
       </div>
     </div>
    </div>
   </div>
   </div>
<input id="shuffled_array" name="shuffled_array" hidden></input> 
<input id="log" name="log" hidden></input>
<input type="hidden" id="inputAssignmentId" name="assignmentId" value="">
<input type="hidden" id="workerId" name="workerId" value="" >
<input type="hidden" id="condition" name="condition" value="${condition}" >
<div style="text-align:center;"><crowd-button form-action="submit">Submit My Work</crowd-button></div>

</div> <!-- end main form cropped--> 


</crowd-form>

</body>

<!--------------------------------------------------------------------------------------------->
<script src="https://code.jquery.com/jquery-3.1.0.min.js"  integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s="   crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js" integrity="sha384-s1ITto93iSMDxlp/79qhWHi+LsIi9Gx6yL+cOKDuymvihkfol83TYbLbOw+W/wv4" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s="   crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js" integrity="sha384-s1ITto93iSMDxlp/79qhWHi+LsIi9Gx6yL+cOKDuymvihkfol83TYbLbOw+W/wv4" crossorigin="anonymous"></script>
<!--------------------------------------------------------------------------------------------->


<!-------------------Regular functions---->
<script>
 function displayCondition(){
   var curr_condition= document.getElementById('condition').value;
   
   if (curr_condition=='full'){
       
   myInst= document.getElementById('exampleFull');
   myInst.style.display="block";
   
   }
   if (curr_condition=='cropped' || curr_condition=='padded_50' || curr_condition=='padded_100'){
       
   myInst= document.getElementById('exampleCropped');
   myInst.style.display="block";
   }
   
   if (curr_condition=='highlight'){
       
   myInst= document.getElementById('exampleHighlight');
   myInst.style.display="block";
   }
   
}   
function GetWorkerId() {
	var workerId = turkGetParam( 'workerId', 'NONE' );
	return workerId;
}

function turkGetParam( name, defaultValue ) {
   var regexS = "[\?&]"+name+"=([^&#]*)";
   var regex = new RegExp( regexS );
   var tmpURL = document.location.href;
   var results = regex.exec( tmpURL );
   if( results == null ) {
     return defaultValue;
   } else {
     return results[1];
   }
}

function GetAssignmentId() {
	var assignmentId = turkGetParam('assignmentId', 'NONE' );
	return assignmentId;
}	
function IsOnTurk() {
  try {
    return ((document.location.host.indexOf('mturk')!=-1) || document.forms["mturk_form"] ||
      (top != self && window.parent.location.host.indexOf("mturk") != -1));
  } catch(err) {
    // insecure content trying to access https://turk probably, so say yes:
    return true;
  }
}
 


function closeInstructions(){
    
   var curr_condition= document.getElementById('condition').value;
   
    if (curr_condition=='full'){
       
   myInst= document.getElementById('exampleFull')
   myInst.style.display="none";
   
   myForm= document.getElementById('attentionFormFull')
   myForm.style.display="block";
   }
   if (curr_condition=='cropped'){
       
   myInst= document.getElementById('exampleCropped')
   myInst.style.display="none";
   
   myForm= document.getElementById('attentionFormCropped')
   myForm.style.display="block";
   }
   
   if (curr_condition=='padded_50' || curr_condition=='padded_100'){
       
   myInst= document.getElementById('exampleCropped')
   myInst.style.display="none";
   
   myForm= document.getElementById('attentionFormPadded')
   myForm.style.display="block";
       
   }
  
   if (curr_condition=='highlight'){
       
   myInst= document.getElementById('exampleHighlight')
   myInst.style.display="none";
   
   myForm= document.getElementById('attentionFormHighlight')
   myForm.style.display="block";
   }
   

}
function showMain(){

var curr_condition= document.getElementById('condition').value;
  
  if (curr_condition=='full' || curr_condition=='highlight'){
   myInst= document.getElementById('attentionFormFull')
   myInst.style.display="none";
   myInst2= document.getElementById('attentionFormHighlight')
   myInst2.style.display="none";
   myForm= document.getElementById('mainFormFull')
   myForm.style.display="block";
   
   var arr = ['${target1_url}','${target2_url}','${target3_url}','${target4_url}'];

                        new_array= shuffle(arr)
                        document.getElementById('target1_full').src= new_array[0] ;    
                        document.getElementById('target2_full').src= new_array[1] ;
                        document.getElementById('target3_full').src= new_array[2] ;
                       document.getElementById('target4_full').src= new_array[3] ;
                       document.getElementById('boxone_full').value= new_array[0] ;    
                      document.getElementById('boxtwo_full').value= new_array[1] ;
                      document.getElementById('boxthree_full').value= new_array[2] ;
                      document.getElementById('boxfour_full').value= new_array[3] ;
                       //save array for later 
                       document.getElementById('shuffled_array').value= new_array;
  }
  if (curr_condition=='cropped' ||curr_condition=='padded_50'||curr_condition=='padded_100'){
   myInst= document.getElementById('attentionFormCropped')
   myInst.style.display="none";
   myInst2= document.getElementById('attentionFormPadded')
   myInst2.style.display="none";
  
   
   myForm= document.getElementById('mainFormCropped')
   myForm.style.display="block";
   var arr = ['${target1_url}','${target2_url}','${target3_url}','${target4_url}'];

                        new_array= shuffle(arr)
                        document.getElementById('target1_crop').src= new_array[0] ;    
                        document.getElementById('target2_crop').src= new_array[1] ;
                        document.getElementById('target3_crop').src= new_array[2] ;
                       document.getElementById('target4_crop').src= new_array[3] ;
                       document.getElementById('boxone_crop').value= new_array[0] ;    
                      document.getElementById('boxtwo_crop').value= new_array[1] ;
                      document.getElementById('boxthree_crop').value= new_array[2] ;
                      document.getElementById('boxfour_crop').value= new_array[3] ;
                       //save array for later 
                       document.getElementById('shuffled_array').value= new_array;
  }
  
}

function shuffle(array) {
  let currentIndex = array.length,  randomIndex;

  // While there remain elements to shuffle.
  while (currentIndex != 0) {

    // Pick a remaining element.
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;

    // And swap it with the current element.
    [array[currentIndex], array[randomIndex]] = [
      array[randomIndex], array[currentIndex]];
  }
 
  return array;
}
 
</script>

<!-----------------Firebase functions ------------------------------------->
<script type="module">

// Import the functions you need from the SDKs you need
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-app.js";
// Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyB5TOZ8EhzXb60L7hmXk2CgpN6sYvb95v8",
    authDomain: "contextproject-2a1b0.firebaseapp.com",
    projectId: "contextproject-2a1b0",
    storageBucket: "contextproject-2a1b0.appspot.com",
    messagingSenderId: "431722105571",
    appId: "1:431722105571:web:0bb5ac03a920a70fac13d6"
  };

// Initialize Firebase
const app = initializeApp(firebaseConfig);
import{getDatabase, ref, set, child, update, remove, get,increment} from "https://www.gstatic.com/firebasejs/9.12.1/firebase-database.js";
 const db = getDatabase();

//-------------------------------------------------------------------------------------------          
 document.addEventListener("DOMContentLoaded", () => {
                     
                        assignTurkerandDisplay();
                     
                         //Start logging 
                        
                         $('#assignmentId').val(GetAssignmentId());
                          var curID = (IsOnTurk())? GetAssignmentId() : prompt("Doesn't look like you " +
                                    "are on Turk, so you're probably testing. Enter an ID to save your data with:", "id");
                         var workerID=GetWorkerId();
                        const startTime = new Date().getTime();
                        var timeStamp = 0;
                        let allLogs = "";
	 		let errLog = "";
                        allLogs = allLogs.concat(JSON.stringify(startTime));
                        document.getElementById("boxone_full").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("boxone_full").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("boxone_full").getBoundingClientRect().top;
                                var dataToServer = formatData("Box One Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                            });
                        document.getElementById("boxtwo_full").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("boxtwo_full").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("boxtwo_full").getBoundingClientRect().top;
                                var dataToServer = formatData("Box Two Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                        });
                        document.getElementById("boxthree_full").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("boxthree_full").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("boxthree_full").getBoundingClientRect().top;
                                var dataToServer = formatData("Box Three Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                        });
                        document.getElementById("boxfour_full").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("boxfour_full").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("boxfour_full").getBoundingClientRect().top;
                                var dataToServer = formatData("Box Four Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                        });
                        
                        //crop 
                        document.getElementById("boxone_crop").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("boxone_crop").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("boxone_crop").getBoundingClientRect().top;
                                var dataToServer = formatData("Box One Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                            });
                        document.getElementById("boxtwo_crop").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("boxtwo_crop").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("boxtwo_crop").getBoundingClientRect().top;
                                var dataToServer = formatData("Box Two Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                        });
                        document.getElementById("boxthree_crop").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("boxthree_crop").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("boxthree_crop").getBoundingClientRect().top;
                                var dataToServer = formatData("Box Three Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				 }catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				 }
                        });
                        document.getElementById("boxfour_crop").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("boxfour_crop").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("boxfour_crop").getBoundingClientRect().top;
                                var dataToServer = formatData("Box Four Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                        });
                        
                        
                        //buttons event listeners 
                        
                        
                         document.getElementById("show_inst_full").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("show_inst_full").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("show_inst_full").getBoundingClientRect().top;
                                var dataToServer = formatData("instructions_full Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                        });
                        
                         document.getElementById("show_inst_cropped").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("show_inst_cropped").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("show_inst_cropped").getBoundingClientRect().top;
                                var dataToServer = formatData("instructions_crop Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                        });
                        
                        document.getElementById("show_inst_highlight").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("show_inst_highlight").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("show_inst_highlight").getBoundingClientRect().top;
                                var dataToServer = formatData("instructions_highlight Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                        });
                        
                        //main 
                        
                        document.getElementById("show_main_full").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("show_main_full").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("show_main_full").getBoundingClientRect().top;
                                var dataToServer = formatData("main_full Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                        });
                        
                        document.getElementById("show_main_cropped").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("show_main_cropped").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("show_main_cropped").getBoundingClientRect().top;
                                var dataToServer = formatData("main_cropped Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				 }catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				 }
                        });
                        
                        document.getElementById("show_main_highlight").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("show_main_highlight").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("show_main_highlight").getBoundingClientRect().top;
                                var dataToServer = formatData("main_highlight Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                        });
                        
                        document.getElementById("show_main_padded").addEventListener('click', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var x = window.scrollX + document.getElementById("show_main_padded").getBoundingClientRect().left;
                                var y = window.scrollY + document.getElementById("show_main_padded").getBoundingClientRect().top;
                                var dataToServer = formatData("main_padded Checked", timeStamp, x, y);
                                allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				}
                        });
                        
                        
                             (function() {
                                document.onmousemove = handleMouseMove;
                                /*document.onmousedown = handleMouseMove;
                                document.onmouseover = handleMouseMove;
                                document.onmouseup = handleMouseMove;*/
                                function handleMouseMove(event) {
                                    var eventDoc, doc, body;
                                    var currTime = new Date().getTime();
                                    timeStamp = currTime - startTime;
                                    event = event || window.event; // IE-ism
                                // If pageX/Y aren't available and clientX/Y are,
                                // calculate pageX/Y - logic taken from jQuery.
                                 // (This is to support old IE)
                                    if (event.pageX == null && event.clientX != null) {
                                        eventDoc = (event.target && event.target.ownerDocument) || document;
                                        doc = eventDoc.documentElement;
                                        body = eventDoc.body;
                                        event.pageX = event.clientX +
                                            (doc && doc.scrollLeft || body && body.scrollLeft || 0) -
                                            (doc && doc.clientLeft || body && body.clientLeft || 0);
                                        event.pageY = event.clientY +
                                            (doc && doc.scrollTop  || body && body.scrollTop  || 0) -
                                            (doc && doc.clientTop  || body && body.clientTop  || 0 );
                                    }
                                    var dataToServer = formatData("mousemove", timeStamp, event.pageX, event.pageY);
                                    //allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                    try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				    }catch(err){
					 errLog = errLog.concat("Jquery post failed @" + String(timeStamp));
				    }
                                }
                             })();
                            document.addEventListener("visibilitychange", function() {
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                let type = "";
                                if(document.visibilityState === 'visible'){
                                       type = "visibilitytovisible";
                                }
                                else{
                                    type = "visibilitytohidden";
                                }
                                var dataToServer = formatData(type, timeStamp, "N/A", "N/A")
                              //  allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				 }catch(err){
					 errLog = errLog.concat(" Jquery post failed @" + String(timeStamp));
				 }
                            });
                            document.querySelector('crowd-form').addEventListener('submit', function(){
                                var currTime = new Date().getTime();
                                timeStamp = currTime - startTime;
                                var dataToServer = formatData("submit clicked", timeStamp, "N/A", "N/A")
                                 allLogs = allLogs.concat(JSON.stringify(dataToServer));
                                try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				}catch(err){
					 errLog = errLog.concat(" Jquery post failed @" + String(timeStamp));
				}
                            });
                           
                            document.querySelector('crowd-form').onsubmit = function() {
                                    updateData(workerID);
                                    var currTime = new Date().getTime();
                                    timeStamp = currTime - startTime;
                                    document.getElementById("log").value = allLogs
                                    var dataToServer = formatData("submit", timeStamp, "N/A", "N/A")
                                    allLogs = allLogs.concat(JSON.stringify(dataToServer));
				    try{
                                    	$.post("https://odin.cis.temple.edu/hotels8k/extra/mturk.php?hitid=" + String(GetAssignmentId()),
                                        	dataToServer
                                    	);
				    }catch(err){
					 errLog = errLog.concat(" Jquery post failed @" + String(timeStamp));
				    }
                                }; 
                                
                         function formatData(event, timestamp, x, y){
                          
                                var dataToServer = {
                                        '#event': event,
                                        '$assignmentID': curID,
                                        '$workerID': workerID,
                                        '$timestamp': (timeStamp/1000),
                                        '$x-coordinate': x,
                                        '$y-coordinate': y,
                                        "$userAgent": navigator.userAgent,
                                        "$windowWidth": $(window).width(),
                                        "$windowHeight": $(window).height(),
                                        "$screenWidth": screen.width,
                                        "$screenHeight": screen.height
                                    }
                                return dataToServer;
                            }
                            


//-----------------all functions ----------------------------------------------------------------------

function assignTurkerandDisplay() {
     
    //var assignmentId= "2";
    //var worker= "worker";  //change
   var assignmentId= GetAssignmentId() ;
   var worker= GetWorkerId();  
   var condition= document.getElementById('condition').value;
   const dbRef = ref(getDatabase());
      //check worker id in DB
  get(child(dbRef, "Workers/"+ worker)).then((snapshot) => {
    // if turker is new then display Hit and insert him into database with attempts 1
  if (!snapshot.exists()) {
     displayCondition();
  if (assignmentId != '' && assignmentId != 'ASSIGNMENT_ID_NOT_AVAILABLE') {
    insertData(worker, assignmentId,condition);
          }
  }
  if(snapshot.exists()){
       if(snapshot.val().numAttempts < 1){
      //show hit and update number of hits
           displayCondition();
  }else {
      // hide form and say you are done goodbye
      document.getElementById('message').style.display = 'block';
        }
  }
 });  
    
}

function updateData(worker){
    update(ref(db, "Workers/" + worker),{ 
     numAttempts:increment(1)
  
  });
    
}          
 // insert data 
 function insertData(worker, assignmentid,condition) {
     set(ref(db, "Workers/" + worker),{ 
     assignmentId: assignmentid,
     condition: condition,
     numAttempts:0 //change
  
  });
} 
  
  
 });//end on load              
</script>
